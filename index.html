<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Генератор Флешкарток</title>
  <link rel="stylesheet" href="src/style.css">
</head>
<body>
  <div class="container">
    <h1>Генератор Флешкарток</h1>
    <nav>
      <div class="nav-left">
        <button onclick="showPage('list')">Всі картки</button>
        <button onclick="showPage('add')">Додати картку</button>
      </div>
      <div class="nav-right">
        <div class="nav-profile">
          <span id="user-info" onclick="showPage('profile')"></span>
          <button id="logoutBtn" style="display:none;" onclick="logout()">Вийти</button>
        </div>
      </div>
    </nav>
    <div id="auth-block">
      <form id="loginForm" style="display:none; gap:8px; margin-bottom:16px;">
        <input type="email" id="loginEmail" placeholder="Email" required />
        <input type="password" id="loginPass" placeholder="Пароль" required />
        <button type="submit">Увійти</button>
        <button type="button" onclick="showRegister()">Реєстрація</button>
      </form>
      <form id="registerForm" style="display:none; gap:8px; margin-bottom:16px;">
        <input type="email" id="regEmail" placeholder="Email" required />
        <input type="password" id="regPass" placeholder="Пароль" required />
        <input type="text" id="regNickname" placeholder="Нікнейм (необов’язково)" />
        <button type="submit">Зареєструватися</button>
        <button type="button" onclick="showLogin()">Назад</button>
      </form>
    </div>
    <div id="page-list" class="page" style="display:none;">
      <h2>Всі картки</h2>
      <div style="margin-bottom:16px;">
        <button id="goToTestBtn">Тестування по темах</button>
      </div>
      <div id="flashcards"></div>
    </div>
    <div id="page-add" class="page" style="display:none;">
      <h2>Додати картку</h2>
      <form id="addForm">
        <input type="text" id="question" placeholder="Питання" required />
        <input type="text" id="answer" placeholder="Відповідь" required />
        <!-- Додаємо вибір теми -->
        <div id="topic-block-form">
          <label>Тема:
            <select id="topicSelect"></select>
            <button id="addTopicBtn" type="button">+ Додати тему</button>
          </label>
        </div>
        <button type="submit">Додати</button>
      </form>
    </div>
    <div id="page-edit" class="page" style="display:none;"></div>
    <div id="page-profile" class="page" style="display:none;">
      <h2>Профіль</h2>
      <form id="profileForm" style="display:flex; flex-direction:column; gap:10px; max-width:350px; margin:auto;">
        <label>Нікнейм: <input type="text" id="profileNickname" /></label>
        <label>Email: <input type="email" id="profileEmail" disabled /></label>
        <button type="submit">Зберегти зміни</button>
      </form>
      <h3>Змінити пароль</h3>
      <form id="passwordForm" style="display:flex; flex-direction:column; gap:10px; max-width:350px; margin:auto;">
        <input type="password" id="oldPass" placeholder="Старий пароль" required />
        <input type="password" id="newPass" placeholder="Новий пароль" required />
        <button type="submit">Змінити пароль</button>
      </form>
    </div>
    <div id="page-test" class="page" style="display:none;">
      <h2>Тестування по темі</h2>
      <form id="testTopicForm">
        <label>Оберіть тему:
          <select id="testTopicSelect"></select>
        </label>
        <button type="submit">Почати тест</button>
      </form>
      <div id="testBlock" style="display:none;">
        <div id="testQuestion"></div>
        <button id="showAnswerBtn">Показати відповідь</button>
        <div id="testAnswer" style="display:none;"></div>
        <div id="testActions" style="display:none;">
          <button id="testCorrectBtn">Вгадав</button>
          <button id="testWrongBtn">Не вгадав</button>
        </div>
        <div id="testStats"></div>
      </div>
    </div>
    <div id="message"></div>
    <!-- Модальне вікно для нової теми -->
    <div id="newTopicModal" style="display:none; position:fixed; left:0;top:0;right:0;bottom:0; background:#0008; z-index:1000; align-items:center; justify-content:center;">
      <div style="background:#fff; padding:24px; border-radius:12px; min-width:240px;">
        <h3>Нова тема</h3>
        <input type="text" id="newTopicInput" placeholder="Назва теми" required>
        <input type="color" id="newTopicColor" value="#e0eaff">
        <button id="saveTopicBtn">Зберегти</button>
        <button onclick="document.getElementById('newTopicModal').style.display='none'">Скасувати</button>
      </div>
    </div>
  </div>
  <script type="module" src="src/main.js"></script>
</body>
</html>
